<meta charset="utf-8">
<title>{% if page.title %}{{ page.title }}{% else %}{{ site.name }}{% endif %}</title>

<!-- Enable responsiveness on mobile devices-->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<link rel="stylesheet" href="/css/highlight-default.css">
<script src="/js/highlight.min.js"></script>
<script src="/js/all.js"></script>
{% for css in page.css %}<link rel="stylesheet" href="{{ css }}">{% endfor %}
{% for js in page.js %}<script src="{{ js }}"></script>{% endfor %}

<link rel="stylesheet" href="/css/all.css">
<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Covered+By+Your+Grace|Open+Sans:700,800,400">

{% if page.robots %}
<meta name="robots" content="{{ page.robots }}" />
{% endif %}

<link rel="alternate" type="application/atom+xml" title="James Malcolm" href="http://feeds.feedburner.com/jgmalcolm">
<link rel="shortcut icon" href="/favicon.ico">

<!-- OpenGraph -->
{% if page.title %}
  {% assign title = page.title %}
  {% if page.description %}
    {% assign description = page.description %}
  {% else %}
    {% assign description = page.excerpt | strip_html | truncatewords: 25 %}
  {% endif %}
{% else %}
  {% assign title = site.name %}
  {% assign description = site.description %}
{% endif %}
<meta property="og:title" content="{{ title }}" />
<meta property="og:description" content="{{ description }}" />
<meta name="description" content="{{ description }}" />
{% capture url %}{{ site.url }}{{ page.url | remove_first:'index.html' }}{% endcapture %}
<meta property="og:url" content="{{ url }}" />
<meta property="article:author" content="https://www.facebook.com/jamesgmalcolm" />

{% assign keywords = page.keywords %}
{% if page.tags %}
  {% capture keywords %}{{ keywords }}{% if keywords %},{% endif %}{{ page.tags }}{% endcapture %}
{% endif %}
{% if keywords.size > 0 %}
<meta name="keywords" content="{{ keywords }}" />
{% endif %}
{% if page.photo_url %}
<meta property="og:image" content="{{ page.photo_url }}" />
{% endif %}
<meta property="og:image" content="http://jgmalcolm.com/about/malcolm.jpg" />
<meta property="og:site_name" content="{{ site.name }}" />
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_US" />
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date: "%Y-%m-%d" }}" />
{% endif %}

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@jgmalcolm" />
<meta name="twitter:image" content="http://jgmalcolm.com/about/malcolm.jpg" />
<meta name="twitter:title" content="{{ title }}" />
<meta name="twitter:description" content="{{ description }}" />
<meta name="twitter:url" content="{{ url }}" />


<script>
$(document).ready(function(){
  /* highlight all code */
  $("pre").each(function(idx,elem) {
    $(elem).addClass("z80asm");
    hljs.highlightBlock(elem);
  });

  /* hover anchor tags on all headers http://ben.balter.com/2014/03/13/pages-anchor-links */
  $(".content :header").each(function(i, el) {
    var $el = $(el);
    var id = $el.attr('id');
    if (id) {
      return $el.append(" ").append($("<a />").addClass("header-link").attr("href", "#" + id).html("(link)"));
    }
  });

});

/* remove click delays on mobile */
$(function() {
    FastClick.attach(document.body);
});
</script>
