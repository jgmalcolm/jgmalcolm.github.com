<meta charset="utf-8">
<title>{% if page.title %}{{ page.title }}{% else %}{{ site.name }}{% endif %}</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/css/all.css">
<link href="http://fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet" type="text/css">
<script src="/js/all.js"></script>
{% for css in page.css %}<link rel="stylesheet" href="{{ css }}">{% endfor %}
{% for js in page.js %}<script src="{{ js }}"></script>{% endfor %}

<link rel="stylesheet" href="/css/highlight-default.css">
<script src="/js/highlight.min.js"></script>

{% if page.robots %}
<meta name="robots" content="{{ page.robots }}" />
{% endif %}

<link rel="alternate" type="application/atom+xml" title="James Malcolm" href="http://feeds.feedburner.com/jgmalcolm">
<link rel="shortcut icon" href="/favicon.ico">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@jgmalcolm"/>

<!-- Facebook OpenGraph -->
{% if page.title %}
  <meta name="title" content="{{ page.title }}"/>
  <meta property="og:title" content="{{ page.title }}"/>
  {% if page.description %}
    <meta name="description" content="{{ page.description }}"/>
    <meta property="og:description" content="{{ page.description }}"/>
  {% else if content %}
    <meta name="description" content="{{ content | strip_html | truncatewords: 25 }}"/>
    <meta property="og:description" content="{{ content | strip_html | truncatewords: 25 }}"/>
  {% endif %}
{% else %}
  <meta name="description" content="{{ site.description }}"/>
{% endif %}
{% if page.keywords %}<meta name="keywords" content="{{ page.keywords }}"/>{% endif %}
{% if page.photo_url %}
<meta property="og:image" content="{{ page.photo_url }}"/>
{% endif %}
<meta property="og:url" content="http://jgmalcolm.com{{ page.url | remove_first:'index.html' }}"/>
<meta property="og:site_name" content="{{ site.name }}"/>
<meta property="og:type" content="article"/>
<meta property="og:locale" content="en_EN"/>
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date: "%Y-%m-%d" }}">
{% endif %}

<script>
$(document).ready(function(){
  /* highlight all code */
  $("pre").each(function(i, block) {
    hljs.highlightBlock(block);
  });

  /* hover anchor tags on all headers http://ben.balter.com/2014/03/13/pages-anchor-links */
  $("#content :header").each(function(i, el) {
    var $el = $(el);
    var id = $el.attr('id');
    if (id) {
      return $el.append(" ").append($("<a />").addClass("header-link").attr("href", "#" + id).html("[link]"));
    }
  });

  /* [top] button only shows once down a screen */
  var duration      = 420;
  var showOffset    = 220;
  var btnFixed      = '.btn-fixed-bottom';
  var btnToTopClass = '.back-to-top';

  $(window).scroll(function () {
    if ($(this).scrollTop() > showOffset) {
      $(btnFixed).fadeIn(duration);
    } else {
      $(btnFixed).fadeOut(duration);
    }
  });

  $(btnToTopClass).click(function (event) {
    event.preventDefault();
    $('html, body').animate({
      scrollTop: 0
    }, duration);
    return false;
  });
});

/* remove click delays on mobile */
$(function() {
    FastClick.attach(document.body);
});
</script>
