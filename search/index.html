---
layout: default
title: "Search"
---

<div id="results"></div>

<script>
(function(){

  <!-- get parameters from URL -->
  function getParam(name) {
      name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
      var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);
      return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
  }

  <!-- set title -->
  var query = getParam('q');
  $("h1").html(query);

  <!-- populate results -->
  $.getJSON("posts.json", function(data) {
    var items = [];
    $.each(data, function (idx, entry) {
      if (entry.tags.indexOf(query) >= 0) {
        items.push("<p><h2 class='post-title'><a href='" + entry.url + "'>" + entry.title + "</a></h2>" + entry.desc + "</p>");
      }
    });
    $("#results").html((items.length > 0) ? items.join("") : "<i>No results found for '" + query + "'</i>");
  });

})();
</script>
